{#
Invoice Created Notification Template

WHAT: Email sent when a new invoice is created/sent.

WHY: Notifies client of payment due with clear call-to-action.

Variables:
- user_name: User's display name (client)
- invoice_id: Invoice ID/number
- invoice_number: Display invoice number (e.g., INV-2024-001)
- project_name: Related project name
- total_amount: Total invoice amount (formatted)
- currency: Currency code
- due_date: Payment due date
- payment_url: URL to pay invoice online
- invoice_url: URL to view invoice details
- organization_name: Billing organization name
- line_items: List of invoice line items (optional)
#}
{% extends "base.html" %}

{% block title %}Invoice {{ invoice_number }}{% endblock %}

{% block content %}
<h2>Invoice {{ invoice_number }}</h2>

<p>Hi {{ user_name }},</p>

<p>You have a new invoice from <strong>{{ organization_name }}</strong>.</p>

<dl class="details-list">
    <dt>Invoice Number</dt>
    <dd>{{ invoice_number }}</dd>

    {% if project_name %}
    <dt>Project</dt>
    <dd>{{ project_name }}</dd>
    {% endif %}

    <dt>Amount Due</dt>
    <dd style="font-size: 24px; font-weight: 600; color: #1f2937;">{{ currency }} {{ total_amount }}</dd>

    <dt>Due Date</dt>
    <dd>
        {% if is_overdue %}
        <span style="color: #dc2626; font-weight: 600;">{{ due_date }} (OVERDUE)</span>
        {% else %}
        {{ due_date }}
        {% endif %}
    </dd>
</dl>

{% if line_items %}
<h3 style="color: #1f2937; font-size: 16px; margin-top: 24px;">Invoice Items</h3>
<table class="data-table">
    <thead>
        <tr>
            <th>Description</th>
            <th style="text-align: center;">Qty</th>
            <th style="text-align: right;">Amount</th>
        </tr>
    </thead>
    <tbody>
        {% for item in line_items %}
        <tr>
            <td>{{ item.description }}</td>
            <td style="text-align: center;">{{ item.quantity }}</td>
            <td style="text-align: right;">{{ currency }} {{ item.amount }}</td>
        </tr>
        {% endfor %}
        <tr class="total-row">
            <td colspan="2"><strong>Total</strong></td>
            <td style="text-align: right;"><strong>{{ currency }} {{ total_amount }}</strong></td>
        </tr>
    </tbody>
</table>
{% endif %}

<p style="text-align: center; margin-top: 24px;">
    <a href="{{ payment_url }}" class="btn btn-primary">Pay Now</a>
    <a href="{{ invoice_url }}" class="btn btn-secondary" style="margin-left: 12px;">View Invoice</a>
</p>

<div class="info-box">
    <p><strong>Payment Options:</strong><br>
    We accept credit cards, debit cards, and bank transfers via our secure payment portal.</p>
</div>

<p style="color: #6b7280; font-size: 14px;">Questions about this invoice? Please contact {{ organization_name }} directly.</p>
{% endblock %}
